<%- include("../partials/head.ejs") %>

  <div class="container">
    <div class="booklist-header">
      <h1>My Books</h1>
    </div>
      <div class="booklist">
        <% books.forEach(b => { %>
        <div class="book">
          <div class="book-info">
            <p class="title">Title: <%= b.title %></p>
            <p class="author">Author: <%= b.author %></p>
            <p class="isbn">ISBN: <%= b.isbn %></p>
            <p class="date">Added: <span><%= b.updatedAt %></span></p>
          </div>
          <div class="buttons">
            <a class="edit" href="/books/update/?title=<%= b.title %>&author=<%= b.author %>&isbn=<%= b.isbn %>">Edit book</a>
            <a class="delete" data-doc="<%= b._id %>">Delete Book</a>
          </div>
        </div>
        <% }) %>
      </div>

      <div class="overlay" style="visibility: visible;">
        <div class="settings">
          <div class="settings-content">
            <div class="settings-header">
              <h2>Edit book</h2>
              <span id="close">&times;</span>
            </div>
            <form id="book-form" action="/books/update" method="POST">
              <div>
                <label for="title">Title</label>
                <input type="text" id="title" name="title" class="u-full-width" value="<%= query.title %>" required />
              </div>
              <div>
                <label for="author">Author</label>
                <input type="text" id="author" name="author" class="u-full-width" value="<%= query.author %>" required />
              </div>
              <div>
                <label for="isbn">ISBN#</label>
                <input type="text" id="isbn" name="isbn" class="u-full-width" value="<%= query.isbn %>" required />
              </div>
              <div>
                <input type="submit" value="Save" id="updatebtn" />
              </div>
            </form>
          </div>
      </div>
      </div>

      
  </div>
  <script src="/js/update.js"></script>
</body>
</html>